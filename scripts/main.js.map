{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["(function () {\r\n  'use strict';\r\n\r\n  function init() {\r\n    // INLINE SVG\r\n    jQuery('img.svg').each(function (i) {\r\n      var $img = jQuery(this);\r\n      var imgID = $img.attr('id');\r\n      var imgClass = $img.attr('class');\r\n      var imgURL = $img.attr('src');\r\n\r\n      jQuery.get(imgURL, function (data) {\r\n        var $svg = jQuery(data).find('svg');\r\n        if (typeof imgID !== 'undefined') {\r\n          $svg = $svg.attr('id', imgID);\r\n        }\r\n        if (typeof imgClass !== 'undefined') {\r\n          $svg = $svg.attr('class', imgClass + ' replaced-svg');\r\n        }\r\n        $svg = $svg.removeAttr('xmlns:a');\r\n        $img.replaceWith($svg);\r\n      }, 'xml');\r\n    });// END OF INLINE SVG\r\n\r\n\r\n    $('.proyek-list_filter .select').selectpicker();\r\n\r\n    mainLayout();\r\n    runSlider();\r\n    func();\r\n\r\n  } init(); // END OF init()\r\n\r\n  function mainLayout() {\r\n    var $headerH = $('header').outerHeight(),\r\n      $footerH = $('footer').height();\r\n    $('main').css({ 'min-height': 'calc(100vh - ' + $footerH + 'px)', 'padding-top': +$headerH + 'px' });\r\n  }\r\n\r\n  function runSlider() {\r\n    $('.slider').each(function () {\r\n      var $slider = $(this),\r\n        $item = $slider.find('.slider__item'),\r\n        $autoplay = ($slider.data('autoplay') == undefined) ? true : $slider.data('autoplay'),\r\n        $margin = ($slider.data('margin') == undefined) ? 24 : $slider.data('margin');\r\n\r\n      if ($item.length > 1) {\r\n        $slider.owlCarousel({\r\n          items: 1,\r\n          loop: false,\r\n          dots: true,\r\n          nav: true,\r\n          navText: [\"<span><img src='../images/ic-chevron-left.svg'></span>\", \"<span><img src='../images/ic-chevron-right.svg'></span>\"],\r\n          autoplay: $autoplay,\r\n          autoplayTimeout: 6000,\r\n          autoplaySpeed: 800,\r\n          margin: $margin,\r\n        });\r\n      } else {\r\n        $slider.trigger('destroy.owl.carousel').removeClass('owl-carousel owl-loaded');\r\n        $slider.find('.owl-stage-outer').children().unwrap();\r\n      }\r\n    });\r\n\r\n    $('.slider-nav').each(function () {\r\n      var $slider = $(this),\r\n        $item = $slider.find('.slider__item'),\r\n        $margin = ($slider.data('margin') == undefined) ? 24 : $slider.data('margin');\r\n\r\n      if ($item.length > 3) {\r\n        $slider.owlCarousel({\r\n          items: 1,\r\n          loop: false,\r\n          dots: false,\r\n          nav: true,\r\n          navText: [\"<span><img src='../images/ic-chevron-left.svg'></span>\", \"<span><img src='../images/ic-chevron-right.svg'></span>\"],\r\n          autoplay: false,\r\n          autoplayTimeout: 6000,\r\n          autoplaySpeed: 800,\r\n          autoWidth:true,\r\n          margin: $margin,\r\n        });\r\n      } else {\r\n        $slider.trigger('destroy.owl.carousel').removeClass('owl-carousel owl-loaded');\r\n        $slider.find('.owl-stage-outer').children().unwrap();\r\n      }\r\n    });\r\n\r\n    $('.head-search').each(function(){\r\n      var t = $(this),\r\n          btn = t.find('a'),\r\n          bs = t.find('.box_search');\r\n      t.click(function(e){\r\n        e.stopPropagation();\r\n        if (t.hasClass('hs-show')){\r\n          t.removeClass('hs-show');\r\n        } else {\r\n          t.addClass('hs-show');\r\n        }\r\n      });\r\n    });\r\n\r\n    $(document.body).click( function(e) {\r\n      if ($('.head-search').hasClass('hs-show')){\r\n        $('.head-search').removeClass('hs-show');\r\n      }\r\n    });\r\n\r\n    $('.sidebar .user-account').each(function(){\r\n      var t = $(this),\r\n          dd = t.find('.user-acnt_menu');\r\n        t.click(function(){\r\n          t.toggleClass('dd-show');\r\n        })\r\n    });\r\n\r\n    $('.masthead--home').each(function () {\r\n      var $t = $(this),\r\n        $slider = $t.find('.slider'),\r\n        $content = $t.find('.masthead__content');\r\n\r\n      $slider.on('changed.owl.carousel', function (event) {\r\n        $content.toggleClass('active')\r\n      });\r\n    });\r\n\r\n    $('.block-journey').each(function () {\r\n      var $t = $(this),\r\n        $slider = $t.find('.slider'),\r\n        $nav = $t.find('.block-journey__slider-nav'),\r\n        $navItem = $nav.find('li');\r\n\r\n      $navItem.each(function () {\r\n        var $el = $(this),\r\n          $data = $(this).data('item');\r\n        $el.click(function () {\r\n          if (!$(this).hasClass('active')) {\r\n            $navItem.not(this).removeClass('active');\r\n            $el.addClass('active');\r\n            $slider.trigger('to.owl.carousel', [$data, 200]);\r\n            $slider.find('.owl-item').addClass('transition');\r\n            setTimeout(function () {\r\n              $slider.find('.owl-item').removeClass('transition');\r\n            }, 200);\r\n          }\r\n        });\r\n      });\r\n\r\n      $slider.on('changed.owl.carousel', function (e) {\r\n        var $activeIndex = e.item.index;\r\n        $navItem.removeClass('active');\r\n        $navItem.eq($activeIndex).addClass('active');\r\n        console.log($activeIndex);\r\n      })\r\n    });\r\n\r\n    $('.block-accord').each(function () {\r\n      var $t = $(this),\r\n        $accordion = $t.find('.accordion'),\r\n        $slider = $t.find('.slider');\r\n\r\n      $accordion.each(function () {\r\n        var $el = $(this),\r\n          $card = $el.find('.card');\r\n\r\n        $card.each(function () {\r\n          var $data = $(this).data('item');\r\n          $(this).click(function () {\r\n            $slider.trigger('to.owl.carousel', [$data, 200]);\r\n          });\r\n        });\r\n      });\r\n\r\n      $slider.on('changed.owl.carousel', function (e) {\r\n        var $activeIndex = e.item.index;\r\n        $accordion.find('.card').removeClass('open');\r\n        $accordion.find('.card').eq($activeIndex).addClass('open');\r\n        $accordion.find('.card').eq($activeIndex).find('.collapse').collapse('toggle');\r\n      });\r\n    });\r\n  }// end of runSlider()\r\n\r\n  function func() {\r\n\r\n    // STICKY HEADER\r\n    if ($('.header').length > 0) {\r\n      var header = $('.header'),\r\n        pos = 10;\r\n      $(window).on('scroll', function () {\r\n        var scroll = $(window).scrollTop();\r\n        if (scroll >= pos) {\r\n          header.addClass('sticky');\r\n          $('body').addClass('header-stick');\r\n        } else {\r\n          header.removeClass('sticky');\r\n          $('body').removeClass('header-stick');\r\n        }\r\n      });\r\n    }\r\n\r\n    $('.user-acnt a').click(function(){\r\n      $('body').toggleClass('usracnt-open');\r\n    });\r\n\r\n    $('.user-header .notif a').click(function(){\r\n      $('body').toggleClass('notif-open');\r\n    });\r\n\r\n    $('.nav-mobile').each(function(){\r\n      $(this).click(function(){\r\n        $('#wrap').toggleClass('menu-show');\r\n      })\r\n    });\r\n\r\n    $('.accordion').each(function () {\r\n      var $t = $(this),\r\n        $card = $t.find('.card');\r\n\r\n      $card.each(function () {\r\n        var $el = $(this),\r\n          $head = $el.find('.card-header'),\r\n          $body = $el.find('.card-body');\r\n\r\n        $head.click(function () {\r\n          $card.not($el).removeClass('open');\r\n          $el.toggleClass('open');\r\n        });\r\n      });\r\n    });\r\n\r\n    // Bootsrap Select\r\n    // $('.select').each(function(){\r\n    //   $(this).selectpicker();\r\n    // });\r\n\r\n    // Form Validation\r\n    $('form.valthis').validate({\r\n      focusInvalid: false,\r\n      ignore: \":disabled, :hidden\",\r\n      errorPlacement: function(error, element) {\r\n        var fg = $(element).closest('.form-group').find('.err-msg');\r\n        error.appendTo(fg);\r\n        $('select.select').selectpicker('refresh');\r\n      },\r\n       invalidHandler: function(form, validator) {\r\n\r\n            if (!validator.numberOfInvalids())\r\n                return;\r\n\r\n            $('html, body').animate({\r\n                scrollTop: $(validator.errorList[0].element).offset().top - 120\r\n            }, 800);\r\n\r\n        }\r\n    });\r\n\r\n    $('form.valthis').each(function(){\r\n      var select = $(this).find('select.select');\r\n      select.on('changed.bs.select', function(e) {\r\n        $(this).valid();\r\n        $(this).closest('.bootstrap-select').removeClass('error');\r\n      });\r\n    });\r\n\r\n    jQuery.extend(jQuery.validator.messages, {\r\n      required: \"Kolom ini wajib diisi\",\r\n      remote: \"Please fix this field.\",\r\n      email: \"Please enter a valid email address.\",\r\n      url: \"Please enter a valid URL.\",\r\n      date: \"Please enter a valid date.\",\r\n      dateISO: \"Please enter a valid date (ISO).\",\r\n      number: \"Please enter a valid number.\",\r\n      digits: \"Please enter only digits.\",\r\n      creditcard: \"Please enter a valid credit card number.\",\r\n      equalTo: \"Please enter the same value again.\",\r\n      accept: \"Please enter a value with a valid extension.\",\r\n      maxlength: jQuery.validator.format(\"Please enter no more than {0} characters.\"),\r\n      minlength: jQuery.validator.format(\"Please enter at least {0} characters.\"),\r\n      rangelength: jQuery.validator.format(\"Please enter a value between {0} and {1} characters long.\"),\r\n      range: jQuery.validator.format(\"Please enter a value between {0} and {1}.\"),\r\n      max: jQuery.validator.format(\"Please enter a value less than or equal to {0}.\"),\r\n      min: jQuery.validator.format(\"Please enter a value greater than or equal to {0}.\")\r\n    });\r\n\r\n  $('.selectAlt').select2(\r\n    {\r\n      placeholder: 'Pilih Tipe Proyek'\r\n    }\r\n  );\r\n\r\n  $('table').each(function(){\r\n    var t = $(this),\r\n        tr = t.find('tr'),\r\n        ln = t.find('a'),\r\n        lnk = ln.attr(\"href\");\r\n    console.log(lnk);\r\n    tr.each(function(){\r\n      $(this).click(function(){\r\n        window.location = lnk;\r\n      })\r\n    });\r\n  })\r\n\r\n  // Count Char\r\n\r\n  $('textarea.form-control').each(function(){\r\n    var t = $(this),\r\n        c = $(this).siblings('.counter'),\r\n        cntr = c.find('.cntr'),\r\n        max = c.find('.max'),\r\n        maxl = t.attr('maxlength');\r\n    if(maxl > 0 && maxl != undefined){\r\n      c.css('display', 'block');\r\n      cntr.html('0');\r\n      max.html(maxl);\r\n    }\r\n    console.log(maxl);\r\n    t.keyup(function(){\r\n      var len = t.val().length;\r\n      cntr.html(len);\r\n    });\r\n  })\r\n\r\n  $('.modal-settings').each(function(){\r\n    var t = $(this),\r\n        nl = t.find('.nav-link'),\r\n        tt = $('#tab_title');\r\n\r\n    nl.each(function(){\r\n      var nlt = $(this).text();\r\n      $(this).click(function(){\r\n        tt.html(nlt);\r\n      })\r\n    })\r\n  })\r\n\r\n  // $('.keahlian').each(function(){\r\n  //   var t = $(this),\r\n  //       sk = $('body').find('.select-keahlian'),\r\n  //       ssk = $('body').find('.select-subkeahlian');\r\n  //   sk.each(function(){\r\n  //     var p = $(this),\r\n  //       select = $(this).find('.select');\r\n  //     select.on('change', function(){\r\n  //       p.siblings('.select-subkeahlian').show();\r\n  //       $('.select-subkeahlian.label').show();\r\n  //     })\r\n  //   })\r\n  // })\r\n\r\n  // Datepicker\r\n  $('.date').each(function() {\r\n    var input = $(this).find('input');\r\n    input.datepicker({\r\n      autoclose: true,\r\n      format : \"dd/mm/yyyy\"\r\n    });\r\n    input.change(function() {\r\n      $(this).valid();\r\n    })\r\n  });\r\n\r\n  $('.icon-date').each(function() {\r\n    var ic = $(this);\r\n    ic.datepicker({\r\n      autoclose: true,\r\n      format : \"dd/mm/yyyy\"\r\n    });\r\n    ic.change(function() {\r\n      $(this).valid();\r\n    })\r\n  });\r\n\r\n  $('.timeline').each(function(){\r\n    var t = $(this),\r\n        m = t.find('.more');\r\n    m.click(function(){\r\n      t.toggleClass('showall');\r\n    })\r\n  });\r\n\r\n  $('.box-file__item').each(function(){\r\n    var t = $(this),\r\n        b = t.find('.dwnld-file');\r\n    b.click(function(){\r\n      t.addClass('downloading');\r\n    })\r\n  })\r\n\r\n  $('.modal-ulas-proyek').each(function(){\r\n    var t = $(this),\r\n        btns = t.find('.action-btn'),\r\n        kw = t.find('.komentar-wrap'),\r\n        rev = t.find('.revise-tnggapan'),\r\n        bxi = t.find('.box-inpt'),\r\n        bw = t.find('.btn-wrap'),\r\n        cls = t.find('.cls-tnggapan');\r\n    rev.click(function(){\r\n      $(this).parent(btns).hide();\r\n      kw.addClass('show');\r\n    });\r\n    cls.click(function(){\r\n      $(this).hide();\r\n      bxi.hide();\r\n      bw.hide();\r\n      $(this).siblings().show();\r\n    });\r\n\r\n  });\r\n\r\n  $('#ConfirmNotif').on('shown.bs.modal', function () {\r\n    $('.modal').not($(this)).css('z-index', '0');\r\n  })\r\n\r\n  $('#ConfirmNotif').on('hidden.bs.modal', function () {\r\n    $('.modal').not($(this)).css('z-index', '');\r\n  })\r\n\r\n  $('.proyek-list_table_mobile').each(function(){\r\n    var t = $(this),\r\n        pi = t.find('.proyek-item');\r\n    pi.each(function(){\r\n      $(this).click(function(){\r\n        $(this).toggleClass('expanded');\r\n      });\r\n    })\r\n  });\r\n\r\n\r\n  }// END of func()\r\n\r\n})();\r\n\r\n\r\n\r\n$('.multiplier').each(function(){\r\n  var t       = $(this),\r\n      max     = t.data('max'),\r\n      item    = t.find('.item').eq(0),\r\n      add     = t.find('.btn-add'),\r\n      format;\r\n\r\n  item.find('.select').each(function(){\r\n    // $(this).selectpicker('destroy');\r\n  });\r\n\r\n  format = item.clone().hide();\r\n  bind(item);\r\n\r\n  function bind (obj) {\r\n    $('.date').each(function() {\r\n      var input = $(this).find('input');\r\n      input.datepicker({\r\n        autoclose: true\r\n      });\r\n      input.change(function() {\r\n        $(this).valid();\r\n      })\r\n    });\r\n    $('.select').selectpicker();\r\n    // $('select.select').each(function(){\r\n    //   $(this).selectpicker({\r\n    //     style: 'select-control',\r\n    //     width: '100%',\r\n    //     size: 5\r\n    //   });\r\n    // });\r\n  }\r\n\r\n  function reOrder(obj){\r\n    var itm = obj.find('.item');\r\n    itm.each(function(i){\r\n      var tmp = i + 1;\r\n      //re order name\r\n      $(this).find('select').each(function(){\r\n        if($(this).attr('name')){\r\n          var name = $(this).attr('name').replace( /\\[\\d/g,'['+(i));\r\n          $(this).attr('name',name);\r\n        }\r\n        if($(this).attr('id')){\r\n          var name = $(this).attr('id').replace( /\\[\\d/g,'['+(i));\r\n          $(this).attr('id',name);\r\n        }\r\n      });\r\n    });\r\n    //toggle delete button\r\n    if(itm.length > 1){\r\n      itm.closest('.multiplier').addClass('multiplied');\r\n    }else{\r\n      itm.closest('.multiplier').removeClass('multiplied');\r\n    }\r\n    //cek limit\r\n    if(itm.length >= max){\r\n      itm.closest('.multiplier').addClass('max');\r\n    }else{\r\n      itm.closest('.multiplier').removeClass('max');\r\n    };\r\n    getBudget();\r\n  };\r\n\r\n  add.click(function(e){\r\n    e.preventDefault();\r\n    var html = format.clone();\r\n    t.append(html);\r\n    bind(html);\r\n    html.slideDown(300);\r\n    reOrder(t);\r\n  });\r\n\r\n  // DELETE\r\n  $('body').on('click','.btn-del',function(e){\r\n    e.preventDefault();\r\n    var parent = $(this).closest('.item'),\r\n        target = parent.closest('.multiplier');\r\n\r\n    parent.slideUp(300, function(){\r\n      parent.remove();\r\n      reOrder(target);\r\n    });\r\n  });\r\n});\r\n"],"file":"main.js"}